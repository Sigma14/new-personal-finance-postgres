{% extends "index.html" %}
{% load mathfilters %}
{% load custom_filters %}
{% load static %}
{% load i18n %}
<!DOCTYPE html>
<head>
    {% block title %} Category list{% endblock title %}
</head>

<body>
{% block content %}
    <!-- BEGIN: Content-->
    <div class="app-content content ">
        <div class="content-overlay"></div>
        <div class="header-navbar-shadow"></div>
        <div class="content-wrapper">
            <div class="content-header row">
                <div class="content-header-left col-md-9 col-12 mb-2">
                    <div class="row breadcrumbs-top">
                        <div class="col-12">
                            <h2 class="content-header-title float-left mb-0">Categories</h2>
                            <div class="breadcrumb-wrapper">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a>
                                    </li>
                                    <li class="breadcrumb-item">Categories
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-body" float="left">
                <div class="row">
                    <div class="col-12">
                        <div class="collapse-margin collapse-icon mt-2" id="categories-list-qna">
                            <div class="card">
                                <div class="card-header" style="padding-bottom:0px; padding-left:0px;" data-toggle="collapse" role="button" data-target="#categories-list-one" aria-expanded="false" aria-controls="categories-list-one">
                                    <ul class="nav nav-pills">
                                        <li class="nav-item">
                                            <a class="nav-link"><i class="bg-light-info" data-feather="info"></i>Category Page Info</a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="categories-list-one" style="padding-top:0px; padding-left:20px;" class="collapse" data-parent="#categories-list-qna">
                                    <div class="card-header">
                                        <ul class="nav nav-pills">
                                            <li class="nav-item">
                                                The 'Category Page' in our app is designed to help you organize your finances more efficiently. Here, you can create, view, and manage various categories and subcategories tailored to your spending and income patterns. This organization helps in better tracking, understanding, and managing your finances, allowing for a more personalized and effective budgeting experience.
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="col-sm-40 offset-sm-20">
                    <div class="card h-100">
                        <div class="card-header d-flex align-items-start justify-content-between pb-2">
                        <div>
                            
                        <i class="bg-light-info" data-feather="info" data-toggle="modal" data-target="#AddCategory"></i> 
                        <a href="{% url 'category_add' %}" class="btn btn-primary"><i
                            class="fa fa-plus"></i> Add Category Group</a>
                        
                        </div>
                        <div class="dropdown">
                            <form method="post" action="{% url 'category_list' %}" id="period_filter_form">
                                {% csrf_token %}
                                <select class="form-control budget_period_filter" name="select_period" style="width:200px">
                                    {% for month in list_of_months %}
                                    {% if month == current_month %}
                                    <option selected value="{{month}}">{{month}} {{ _('Budget')}}</option>
                                    {% else %}
                                    <option value="{{month}}">{{month}} {{ _('Budget')}}</option>
                                    {% endif %}
                                    {% endfor %}
                                </select>
                            </form>
                            
                        </div>
                    </div>
                </div>
                

                <br/>
                <section id="dashboard-ecommrc">
                    <div class="row match-height">
                        <div class="col-12">
                            <div class="card card-congratulation-medal">
                                <div class="card-body">
                                    <div class="download_csv_form"></div>
                                    <div class="download_pdf_form"></div>
                                    <div class="card-header border-bottom">
                                        <h4 class="card-title mb-25">CATEGORIES</h4>
                                        <div float="right">
                                        <button class="btn btn-primary cat-download-csv" file_name="my_category.csv" table_heading="{{category_key_dumbs}}" table_length="{{category_key | length}}" table_id="#categories" fun_name="download_csv" url="{% url 'download_csv' %}">CSV<i data-feather="download" class="avatar-icon"></i></button>
                                        <button class="btn btn-primary cat-download-csv" pdf_title="Categories" file_name="my_categories.pdf" table_heading="{{category_key_dumbs}}" table_length="{{category_key | length}}" table_id="#categories" fun_name="download_pdf" url="{% url 'download_pdf' %}">PdF<i data-feather="download" class="avatar-icon"></i></button>
                                        <input type="hidden" id="download_graph_data" data_label="{{categories_name_dumbs}}" graph_type="bar" data_value="{{categories_value}}">
                                        </div>
                                    </div>
                                    <div class="card-datatable">
                                        <table class="dt-row-grouping table category_table" id="categories">
                                            <thead>
                                                <tr>
                                                    <!-- {% for name in category_key %}
                                                        <th>{{name}}</th>
                                                    {% endfor %} -->
                                                    <th>CATEGORY</th>
                                                    <th>BUDGETTED <br> AMOUNT</th>
                                                    <th>MONTHLY <br> TRANSACTIONS</th>
                                                    <th>REMAINING <br> BALANCE</th>
                                                    <th>ACTIONS</th>
                                                </tr>
                                            </thead>
                                            
                                            <tbody>
                                            <tr><td colspan="5">
                                                <div class="input-group input-group-merge">
                                                        <input type="text" id="add_category_group" class="form-control" name="category_name" placeholder="Enter Category Name"/>
                                                </div>
                                            </td></tr>
                                                {% for key, value in sub_category_data.items %}
                                                    <tr class="category" class_name="subcategory{{forloop.counter}}">
                                                        <td>
                                                            <a class="lead add_category" href="{% url 'subcategory_add' category_pk=value.2 %}" title="add category"><i class="bg-light-info" data-feather="plus"></i>&nbsp;</a><strong style="font-size:16px;">  <b>{{key}}</b>&nbsp;</strong>
                                                            <i class="fa fa-chevron-down subcategory{{forloop.counter}}_dropdown"></i><i class="fa fa-chevron-right subcategory{{forloop.counter}}_dropdown" style="display:None;"></i></td>
                                                        <td><strong>{{value.0}}</strong></td>
                                                        <td><strong>{{value.1}}</strong></td>
                                                        <td><strong>{{value.0|sub:value.1}}</strong></td>
                                                        <td>
                                                            {% if key == 'Bills & Subscriptions' or key == 'Goals' or key == 'Funds' or key == 'Income' %}
                                                                <strong>&nbsp;</strong>
                                                            {% else %}
                                                                <div class="d-flex align-items-center">
                                                                <span class="font-weight-bolder mr-1">
                                                                    <ul class="list-inline m-0">
                                                                        <li class="list-inline-item">
                                                                            <a href="{% url 'category_update' pk=value.2 %}"
                                                                               class="btn btn-success btn-sm rounded-0" data-toggle="tooltip" title="Edit Category"><i
                                                                                    class="fa fa-edit"></i></a>
                                                                        </li>
                                                                        <li class="list-inline-item">
                                                                            <button type="button" del_method="category_delete" delete_name="{{ key }} Category Group" url="{% url 'category_delete' pk=value.2 %}"
                                                                               class="btn btn-danger btn-sm rounded-0 delete_button"
                                                                               data-toggle="tooltip" data-placement="top" title="Delete Category"><i
                                                                                    class="fa fa-trash"></i></button>
                                                                        </li>
                                                                    </ul>
                                                                </span>
                                                            </div>
                                                            {% endif %}
                                                        </td>
                                                        
                                                    </tr>
                                                    
                                                    {% for data in value.3 %}
                                                    <tr class="subcategory{{forloop.parentloop.counter}} show_transaction" method_name="transactions_cls{{data.3}}" >
                                                        <td>
                                                            {% if category_icons|get_item:data.0 %}
                                                                <img src="{% static category_icons|get_item:data.0 %}" alt="{{ data.0 }}" style="width: 20px; height: 20px; vertical-align: middle;">
                                                            {% else %}
                                                                <img src="{{ default_icon }}" alt="{{ category }}" style="width: 20px; height: 20px; vertical-align: middle;">
                                                            {% endif %}
                                                            {{ data.0 }}
                                                            
                                                            </td>
                                                        <!-- {{ category_icons|get_item:data.0 }}</td> -->
                                                        <td>{{ data.1 }}</td>
                                                        
                                                        <td>{{ data.2 }}</td>
                                                        <td>{{data.1 |sub:data.2}}</td>
                                                       
                                                        <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="font-weight-bolder mr-1">
                                                                <ul class="list-inline m-0">
                                                                    <li class="list-inline-item">
                                                                        <a href="{% url 'subcategory_update' pk=data.3 %}"
                                                                           class="btn btn-success btn-sm rounded-0" data-toggle="tooltip" title="Edit Sub-Category"><i
                                                                                class="fa fa-edit"></i></a>
                                                                    </li>
                                                                    <li class="list-inline-item">
                                                                        <button type="button" del_method="category_delete" delete_name="{{data.0}} Category" url="{% url 'subcategory_delete' pk=data.3 %}"
                                                                           class="btn btn-danger btn-sm rounded-0 delete_button"
                                                                           data-toggle="tooltip" data-placement="top" title="Delete Sub-Category"><i
                                                                                class="fa fa-trash"></i></button>
                                                                    </li>

                                                                    {% if data.8 != 'false' %}

                                                                    <li class="list-inline-item">
                                                                        <a type="button" href="#"
                                                                           class="btn btn-warning btn-sm rounded-0 add-transaction-btn "
                                                                           data-toggle="tooltip" data-placement="top" title="Add Transactions " data-toggle="modal" data-target="#transactionFormModal" data-category="{{ key }}" data-subcategory="{{ data.0 }}" data-button-id="{{data.3}}"><i
                                                                                class="fa fa-plus"></i></a>
                                                                    </li>
                                                                    {% endif %}
                                                                    {% if data.8 == 'false' %}
                                                                        <li class="list-inline-item">
                                                                            <a type="button" href="#" class="btn btn-primary btn-sm rounded-0 add-budget-btn" data-toggle="modal" data-target="#budgetFormModal" title="Add Budget" data-category="{{ key }}" data-subcategory="{{ data.0 }}" data-button-id="{{data.3}}">
                                                                                <i class="fa fa-dollar"></i>
                                                                            </a>
                                                                        </li>
                                                                    {% endif %}
                                                                    

                                                                </ul>
                                                            </span>
                                                        </div>
                                                    </td>
                                                    </tr>
                                                    <tr class="subcategory{{forloop.parentloop.counter}}">
                                                        <td colspan="5"> <!-- Spanning all columns -->
                                                            <!-- Progress bar -->
                                                            <div class="budget-table-cell-progress budget-table-row-li" role="cell" aria-colindex="7">
                                                                <div class="progress" style="height: 20px;">
                                                                    <!-- Adjust the width dynamically based on progress percentage -->
                                                                    <div class="progress-bar " role="progressbar" style="width: {{data.4}}%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">{{data.4}}%</div>
                                                                </div>
                                                                Transaction date :- {{data.6}}
                                                                
                                                                
                                                            </div>
                                                            <br>
                                                            <div class="card-datatable table-responsive transactions_cls{{data.3 }}" style="display:None;">
                                                                <table class="dt-row-grouping table" id="transactions">
                                                                    <thead>
                                                                        <tr>
                                                                            {% for name in transaction_key %}
                                                                            <th>{{name}}</th>
                                                                            {% endfor %}
                                                                            <th>Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if data.7  %}
                                                                            {% for data in data.7 %}
                                                                            <tr>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{ forloop.counter }}</span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.transaction_date}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        {% if data.out_flow %}
                                                                                        <span class="font-weight-bolder text-danger mr-1">-{{data.account.currency}}{{data.amount}}</span>
                                                                                        {% else %}
                                                                                        <span class="font-weight-bolder text-success mr-1">+{{data.account.currency}}{{data.amount}}</span>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.payee}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.account.name}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.categories}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                {% if data.bill.label %}
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.bill.label}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                {% else %}
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">-</span>
                                                                                    </div>
                                                                                </td>
                                                                                {% endif %}
                                                                                {% if data.budgets.name %}
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">{{data.budgets.name}}</span>
                                                                                    </div>
                                                                                </td>
                                                                                {% else %}
                                                                                <td>
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">-</span>
                                                                                    </div>
                                                                                </td>
                                                                                {% endif %}
                                                                                <td style="width:15%">
                                                                                    <div class="d-flex align-items-center">
                                                                                        <span class="font-weight-bolder mr-1">
                                                                                            <ul class="list-inline m-0">
                                                                                                <li class="list-inline-item">
                                                                                                    <a href="{% url 'transaction_update' pk=data.id %}"
                                                                                                        class="btn btn-success btn-sm rounded-0" type="button"
                                                                                                        data-toggle="tooltip" data-placement="top" title="Edit"><i
                                                                                                        class="fa fa-edit"></i></a>
                                                                                                </li>
                                                                                                <li class="list-inline-item">
                                                                                                    <button type="button" delete_name="{{ data.payee }} Transaction" url="{% url 'transaction_delete' pk=data.id %}"
                                                                                                        class="btn btn-danger btn-sm rounded-0 delete_button"
                                                                                                        data-toggle="tooltip" data-placement="top" title="Delete"><i
                                                                                                        class="fa fa-trash"></i></button>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </span>
                                                                                    </div>
                                                                                </td>
                                                                                
                                                                            </tr>
                                                                            {% endfor %}
                                                                        {% else %}
                                                                            <tr>
                                                                                <td colspan="9">
                                                                                    <div class="d-flex justify-content-center align-items-center">
                                                                                        <span class="font-weight-bolder mr-1 text-danger">No Transaction data available</span>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    
                                                    
                                                    {% endfor %}
                                                {% endfor %}
                                            </tbody>
                                            
                                        </table>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal for Budget Form -->
                    <div class="modal fade" id="budgetFormModal" tabindex="-1" role="dialog" aria-labelledby="budgetFormModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="budgetFormModalLabel">Add Budget</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form class="form form-horizontal" action="{% url 'budget_add' %}" method="post" id="budgetForm">
                                        {% csrf_token %}
                                        
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="categories">{% trans 'Category Groups' %}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            <input type="text" class="form-control"  name="categories" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 transaction_cat_list" >
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="categories">{% trans 'Categories' %}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge" >
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            <input type="text" class="form-control" name="subcategory" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="currency">{{_('Currency')}}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            {{ budget_form.currency }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="account">Account</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            
                                                            <div class="form-group">
                                                                
                                                                <select class="form-control"  name="account" style='width:100%' required>
                                                                    {% for key, value in bank_accounts.items %}
                                                                    {% if forloop.counter == 1 %}
                                                                        <option value="{{key}}" selected>{{value}}</option>
                                                                    {% else %}
                                                                        <option value="{{key}}">{{value}}</option>
                                                                    {% endif %}
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="amount">{% trans 'Amount' %}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            <input type="text" class="form-control"  name="expected_amount" required>
                                                            
                                                        </div>
                                                        <input type="text" class="form-control"  name="actual_amount" hidden value="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="budget_period">{% trans 'Auto-budget period' %}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            {{ budget_form.budget_period }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="budget_date">{% trans 'Start Date' %}</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"></span>
                                                            </div>
                                                            <input type="text" name="budget_date" class="form-control flatpickr-basic"  placeholder="YYYY-MM-DD" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="auto_budget">&nbsp;</label>
                                                    </div>
                                                    <div class="custom-control custom-checkbox">
                                                        {{ budget_form.auto_budget }}
                                                        <label class="custom-control-label" for="customCheck1">&nbsp;&nbsp;{% trans 'Auto-budget' %}</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-9 offset-sm-3">
                                                <button type="submit" class="btn btn-primary mr-1 " name="budget-add-button" >{% trans 'Create' %}</button>
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans 'Cancel' %}</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal for Transaction Form -->
                    <div class="modal fade" id="transactionFormModal" tabindex="-1" role="dialog" aria-labelledby="transactionFormModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="transactionFormModalLabel">Add Transaction</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form class="form form-horizontal" method="POST" action="{% url 'transaction_add' %}" id="transactionForm">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label>Date</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            {{form.transaction_date}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Description</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <input type="text" id="fname-icon" class="form-control" name="payee" required
                                                                   placeholder="Expense"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Account</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                           {{ form.account }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Category Groups</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge" name="transaction_category">
                                                            {{ form.category }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 transaction_cat_list" style="display:None;">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Categories</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge" id="trans_sub_cat">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 transaction_due_bill_list" style="display:None;">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Unpaid Bills</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge" id="trans_bills">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 transaction_income_list" style="display:None;">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Uncredited Income</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge" id="trans_income">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12" style="display:None;">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Bill</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            {{ form.bill }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 budget_div" style="display:None;">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Budget</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <input type="text" class="form-control" id="budget_name" name="budget_name" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label>Amount</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            {{form.amount}}
                                                        </div>
                                                        <p id="amount_error" class="text-danger" style="display:None"></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <i class="bg-light-info" data-feather="info" data-toggle="modal" data-target="#TagsInfo"></i> 
                                                        <label for="transaction_tags">Tags</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            <input data-toggle="modal" data-target="#tag_toggle" type="text" id="transaction_tags" class="form-control" name="tag_name"
                                                                   placeholder="Add Tags" readonly/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <i class="bg-light-info" data-feather="info" data-toggle="modal" data-target="#NotesInfo"></i> 
                                                        <label for="fname-icon">Notes</label>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <div class="input-group input-group-merge">
                                                            {{ form.notes }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row">
                                                    <div class="col-sm-3 col-form-label">
                                                        <label for="fname-icon">Type</label>
                                                    </div>&nbsp;
                                                    <div class="custom-control custom-radio">
                                                        <input type="radio" id="customRadio1" value="True" name="out_flow" class="custom-control-input" checked/>
                                                        <label class="custom-control-label" for="customRadio1">&nbsp;Expenses&nbsp;</label>
                                                    </div>
                                                    &nbsp;
                                                    <div class="custom-control custom-radio">
                                                        <input type="radio" id="customRadio2" value="False" name="out_flow" class="custom-control-input"/>
                                                        <label class="custom-control-label" for="customRadio2">&nbsp;Income</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-9 offset-sm-3">
                                                <input type="submit" name="category_page" class="btn btn-primary mr-1" value="Save">
                                                
                
                                                <a href="#" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</a>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade text-left" id="tag_toggle" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="myModalLabel1">Select and add tags for this transaction</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <!-- Basic Vertical form layout section start -->
                                    <section id="basic-vertical-layouts" >
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="card" style="margin-bottom:0px;">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <h5>Name</h5>
                                                                    <input type="text" id="tag_name" name="tag_name" class="form-control" required/>
                                                                </div>
                                                            </div>
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <button class="btn btn-primary add_tag_btn">Add</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Basic Vertical form layout section end -->
                                </div>
                                <div class="modal-footer">
                                    <div class="col-12">
                                        <div class="card">
                                                <div class="card-header border-bottom">
                                                    <h4 class="card-title">All tags</h4>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row tag_sugg">
                                                        {% for tag in tags %}
                                                        
                                                        <a style="margin:5px; font-size: 12px;" class="btn btn-outline-secondary close select_tag" data-dismiss="modal" aria-label="Close">
                                                            {{tag.name}}&nbsp;<i class="fa fa-plus"></i>
                                                        </a>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Model-->
                    <div class="modal fade" id="TagsInfo" tabindex="-1" role="dialog" aria-labelledby="TagsInfoModel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="TagsInfoModel">Tags Description</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                                Tags help you categorize transactions in a way that makes sense for your personal finance management. You can tag transactions by type, purpose, or any other system that helps you stay organized.
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="modal fade" id="NotesInfo" tabindex="-1" role="dialog" aria-labelledby="NotesInfoModel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="NotesInfoModel">Notes Description</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                                The notes section is a space to add additional information about the transaction. This could include details like the context of the expenditure, reminders about recurring payments, or any other relevant information that aids in your financial tracking and analysis.
                            </div>
                          </div>
                        </div>
                    </div>
                </section>
                <section id="dashboard-ecommerce">
                    <div class="row match-height">
                        <div class="col-xl-12 col-md-12 col-12">
                            <div class="card card-congratulation-medal">
                                <div class="card-body">
                                    <h5>
                                        <i class="bg-light-info" data-feather="info" data-toggle="modal" data-target="#CategoryGraph"></i> 
                                        Category Groups Expenses
                                    </h5>
                                    <div id="column-chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
             <!-- Model -->
            <div class="modal fade" id="AddCategory" tabindex="-1" role="dialog" aria-labelledby="AddCategoryModel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddCategoryModel">AddCategory Description</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            The '+ Add Category' button is a simple yet powerful tool for customizing your budget. By clicking this button, you can create new categories that reflect your unique financial situation and goals. Whether it's for a specific savings project, a new expense type, or an income source, this feature provides the flexibility to tailor your budget to your life.
                        </div>
                    </div>
                </div> 
            </div> 
            <div class="modal fade" id="CategoryGraph" tabindex="-1" role="dialog" aria-labelledby="CategoryGraphModel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="CategoryGraphModel">CategoryGraph Description</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            The 'Category Group Expenses Graph' is an essential feature for visualizing your spending across different categories. This graph dynamically represents your expenses in each category, such as 'Housing', 'Food', 'Transportation', and 'Entertainment', among others. The visual format makes it easy to see at a glance where most of your money is going.
                        </div>
                    </div>
                </div> 
            </div> 
        </div>
    </div>
{% endblock content%}

