<!DOCTYPE html>
{% load static i18n %} {% get_current_language as CURRENT_LANGUAGE %} {% get_static_prefix as STATIC_PREFIX %}
<html class="loading dark-layout" lang="en" data-layout="dark-layout" data-textdirection="ltr">
  <!-- BEGIN: Head-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui" />
    <meta
      name="description"
      content="Vuexy admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities."
    />
    <meta
      name="keywords"
      content="admin template, Vuexy admin template, dashboard template, flat admin template, responsive admin template, web app"
    />
    <meta name="author" content="PIXINVENT" />
    <title>{% block title %} {% endblock title %}</title>
    <link rel="apple-touch-icon" href="{% static 'app-assets/images/ico/apple-icon-120.png' %}" />
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'app-assets/images/ico/favicon.ico' %}" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/vendors.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/charts/apexcharts.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/extensions/toastr.min.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/pickers/pickadate/pickadate.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/pickers/flatpickr/flatpickr.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/calendars/fullcalendar.min.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/forms/select/select2.min.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/extensions/sweetalert2.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/forms/wizard/bs-stepper.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/forms/spinner/jquery.bootstrap-touchspin.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/custom/style.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/tables/datatable/dataTables.bootstrap4.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/tables/datatable/responsive.bootstrap4.min.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/extensions/shepherd.min.css' %}" />
    <!-- END: Vendor CSS-->
    <!-- Data Table-->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/datatables.min.css' %}" />
    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/bootstrap.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/bootstrap-extended.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/colors.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/components.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/themes/dark-layout.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/themes/bordered-layout.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/themes/semi-dark-layout.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/app-invoice.css' %}" />
    <!-- BEGIN: Page CSS-->
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/core/menu/menu-types/vertical-menu.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/plugins/charts/chart-apex.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/extensions/ext-component-toastr.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/extensions/ext-component-tour.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/app-ecommerce.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/forms/pickers/form-flat-pickr.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/forms/pickers/form-pickadate.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/plugins/forms/form-wizard.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/app-calendar.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/extensions/ext-component-sweet-alerts.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/plugins/forms/form-validation.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/page-auth.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/css/plugins/extensions/ext-component-toastr.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/plugins/forms/form-number-input.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/tables/datatable/dataTables.bootstrap4.min.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'app-assets/vendors/css/tables/datatable/responsive.bootstrap4.min.css' %}"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- END: Page CSS-->
    <!--HTML2Canvs-->
    <script src="{% static 'assets/js/html2canvas.min.js' %}"></script>
    <!--Fabric JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.js"></script>
    <!--Icon Bootstrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/style.css' %}" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <!-- END: Custom CSS-->
    <!-- BEGIN: Google ANALYTICS  -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EXPQGENY93"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-EXPQGENY93");
    </script>
    <!-- ENG: Google ANALYTICS  -->
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-MZJCWMRQ");
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <!-- END: Head-->
  <!-- BEGIN: Body-->
  <body
    class="vertical-layout vertical-menu-modern navbar-floating footer-static menu-collapsed fixed-con"
    data-open="click"
    data-menu="vertical-menu-modern"
    data-col=""
  >
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-MZJCWMRQ"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- BEGIN: Header-->
    {% if user.is_authenticated %}

    <nav class="header-navbar navbar navbar-expand-lg align-items-center floating-nav navbar-dark navbar-shadow">
      <div class="navbar-container d-flex content">
        <div class="bookmark-wrapper d-flex align-items-center">
          <ul class="nav navbar-nav d-xl-none">
            <li class="nav-item">
              <a class="nav-link menu-toggle" href="javascript:void(0);"><i class="ficon" data-feather="menu"> </i></a>
            </li>
          </ul>
        </div>
        <ul class="nav navbar-nav bookmark-icons nav-pills" style="height: 15px">
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'home' %} active {% endif %}"
              href="{% url 'home' %}"
              data-placement="top"
              >Home</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'category_list' %} active {% endif %}"
              href="{% url 'category_list' %}"
              data-placement="top"
              >Category</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'account_box' %} active{% endif %}"
              href="{% url 'account_box' %}"
              data-placement="top"
              >Accounts</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'bill_list' %} active {% endif %}"
              href="{% url 'bill_list' %}"
              data-placement="top"
              >Bill List</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'budgets' %} active {% endif %}"
              href="{% url 'budgets' %}"
              data-placement="top"
              >Budgets</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'goal_add' %} active {% endif %}"
              href="{% url 'goal_list' %}"
              data-placement="top"
              >Goals</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'transaction_list' %} active {% endif %}"
              href="{% url 'transaction_list' %}"
              data-placement="top"
              >Transaction</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'real_estate_home' %} active {% endif %}"
              href="{% url 'real_estate_home'%}"
              data-placement="top"
              >Real Estate</a
            >
          </li>
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'mortgagecalculator_list' %} active {% endif %}"
              href="{% url 'mortgagecalculator_list' %}"
              data-placement="top"
              >Calculator</a
            >
          </li>
          {% if request.user.is_staff %}
          <li class="nav-item d-none d-lg-block" style="padding-top: 6px; padding-right: 10px">
            <a
              style="height: 25px"
              class="nav-link {% if page == 'app-error-report' %} active {% endif %}"
              href="{% url 'app-error-report' %}"
              data-placement="top"
              >Admin Report</a
            >
          </li>
          {% endif %}
        </ul>
        <ul class="nav navbar-nav align-items-center ml-auto">
          <li class="nav-item d-none d-lg-block">
            <a class="nav-link nav-link-style"><i class="ficon" data-feather="sun"></i></a>
          </li>
          {% if user.is_authenticated %}
          <li class="nav-item dropdown dropdown-user">
            <a
              class="nav-link dropdown-toggle dropdown-user-link"
              id="dropdown-user"
              href="javascript:void(0);"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <div class="user-nav d-sm-flex d-none">
                <span class="user-name font-weight-bolder">Hi,</span
                ><span class="user-status">{{user.first_name}}</span>
              </div>
              <span class="avatar"
                ><img
                  class="round"
                  src="{% static 'app-assets/images/portrait/small/avatar-s-11.jpg' %}"
                  alt="avatar"
                  height="40"
                  width="40" /><span class="avatar-status-online"></span
              ></span>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdown-user">
              <a class="dropdown-item" href=""><i class="mr-50" data-feather="user"></i> Profile</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="{% url 'user_logout' %}"
                ><i class="mr-50" data-feather="power"></i> Logout</a
              >
            </div>
          </li>
          {% else %}
          <li class="nav-item"><a class="nav-link" href="{% url 'user_login' %}" data-placement="top">Login</a></li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <!-- BEGIN: Main Menu-->
    <div class="main-menu menu-fixed menu-dark menu-accordion menu-shadow" data-scroll-to-active="true">
      <div class="navbar-header">
        <ul class="nav navbar-nav flex-row">
          <li class="nav-item mr-auto">
            <a class="navbar-brand" href="{% url 'home' %}">
              <span class="brand-logo">
                <svg
                  viewbox="0 0 139 95"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  height="24"
                >
                  <defs>
                    <lineargradient id="linearGradient-1" x1="100%" y1="10.5120544%" x2="50%" y2="89.4879456%">
                      <stop stop-color="#000000" offset="0%"></stop>
                      <stop stop-color="#FFFFFF" offset="100%"></stop>
                    </lineargradient>
                    <lineargradient id="linearGradient-2" x1="64.0437835%" y1="46.3276743%" x2="37.373316%" y2="100%">
                      <stop stop-color="#EEEEEE" stop-opacity="0" offset="0%"></stop>
                      <stop stop-color="#FFFFFF" offset="100%"></stop>
                    </lineargradient>
                  </defs>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="Artboard" transform="translate(-400.000000, -178.000000)">
                      <g id="Group" transform="translate(400.000000, 178.000000)">
                        <path
                          class="text-primary"
                          id="Path"
                          d="M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z"
                          style="fill: currentColor"
                        ></path>
                        <path
                          id="Path1"
                          d="M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z"
                          fill="url(#linearGradient-1)"
                          opacity="0.2"
                        ></path>
                        <polygon
                          id="Path-2"
                          fill="#000000"
                          opacity="0.049999997"
                          points="69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"
                        ></polygon>
                        <polygon
                          id="Path-21"
                          fill="#000000"
                          opacity="0.099999994"
                          points="69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"
                        ></polygon>
                        <polygon
                          id="Path-3"
                          fill="url(#linearGradient-2)"
                          opacity="0.099999994"
                          points="101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"
                        ></polygon>
                      </g>
                    </g>
                  </g>
                </svg>
              </span>
              <h2 class="brand-text">SimpleFinancial</h2>
            </a>
          </li>
        </ul>
      </div>
      <div class="shadow-bottom"></div>
      <div class="main-menu-content">
        <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
          <li class="navigation-header"><span data-i18n="Apps Pages">Apps & Pages</span></li>
          <li class="nav-item {% if request.resolver_match.view_name == 'home' %} active {% endif %}">
            <a class="d-flex align-items-center" href="{% url 'home' %}"
              ><i data-feather="home"></i><span class="menu-title text-truncate" data-i18n="Dashboard">Home</span></a
            >
          </li>
          <li
            class="nav-item {% if request.resolver_match.view_name == 'category_list' or request.resolver_match.view_name == 'category_add' or request.resolver_match.view_name == 'category_detail' or request.resolver_match.view_name == 'category_update' %}active{% endif %}"
          >
            <a class="d-flex align-items-center" href="{% url 'category_list' %}"
              ><i data-feather="list"></i
              ><span class="menu-title text-truncate" data-i18n="Category">Categories</span></a
            >
          </li>
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#"
              ><i data-feather="user"></i><span class="menu-title text-truncate" data-i18n="Accounts">Accounts</span></a
            >
            <ul class="menu-content">
              <li
                class="{% if request.resolver_match.view_name == 'account_box' or request.resolver_match.view_name == 'account_list' or request.resolver_match.view_name == 'account_add' or request.resolver_match.view_name == 'account_detail' or request.resolver_match.view_name == 'account_update' %}active{% endif %}"
              >
                <a class="d-flex align-items-center" href="{% url 'account_box' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Collapsed Menu">Bank Accounts</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.view_name == 'loan_accounts_box' or request.resolver_match.view_name == 'loan_add' or request.resolver_match.view_name == 'loan_list' or request.resolver_match.view_name == 'loan_details' or request.resolver_match.view_name == 'loan_update' %}active{% endif %}"
              >
                <a class="d-flex align-items-center" href="{% url 'loan_accounts_box' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Collapsed Menu"
                    >Mortgages and Loans Accounts</span
                  ></a
                >
              </li>
            </ul>
          </li>
          <li
            class="nav-item {% if request.resolver_match.view_name == 'bill_list' or request.resolver_match.view_name == 'bill_add' or request.resolver_match.view_name == 'bill_detail' or request.resolver_match.view_name == 'bill_update' %}active{% endif %}"
          >
            <a class="d-flex align-items-center" href="{% url 'bill_list' %}"
              ><i data-feather="file-text"></i
              ><span class="menu-title text-truncate" data-i18n="Bills">Bills & Subscriptions</span></a
            >
          </li>
          <li
            class="nav-item {% if request.resolver_match.view_name == 'budgets' or request.resolver_match.view_name == 'sample-budgets' or request.resolver_match.view_name == 'current-budgets' or request.resolver_match.view_name == 'compare-budgets' or request.resolver_match.view_name == 'budget_detail' or request.resolver_match.view_name == 'budget_add' or request.resolver_match.view_name == 'budget_update' %}active{% endif %}"
          >
            <a class="d-flex align-items-center" href="{% url 'budgets' %}"
              ><i data-feather="pie-chart"></i
              ><span class="menu-title text-truncate" data-i18n="Calculators">Budgets</span></a
            >
          </li>
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#"
              ><i data-feather="target"></i><span class="menu-title text-truncate" data-i18n="Accounts">Goals</span></a
            >
            <ul class="menu-content">
              <li
                class="{% if request.resolver_match.view_name == 'goal_list' or request.resolver_match.view_name == 'goal_add' or request.resolver_match.view_name == 'goal_detail' or request.resolver_match.view_name == 'goal_update' %}active{% endif %}"
              >
                <a class="d-flex align-items-center" href="{% url 'goal_list' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Collapsed Menu">Goals List</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.view_name == 'fund_list' or request.resolver_match.view_name == 'fund_detail' or request.resolver_match.view_name == 'fund_update' %}active{% endif %}"
              >
                <a class="d-flex align-items-center" href="{% url 'fund_list' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Collapsed Menu">Available Funds</span></a
                >
              </li>
            </ul>
          </li>
          <li
            class="nav-item {% if request.resolver_match.view_name == 'transaction_list' or request.resolver_match.view_name == 'transaction_add' or request.resolver_match.view_name == 'transaction_detail' or request.resolver_match.view_name == 'transaction_update' %}active{% endif %}"
          >
            <a class="d-flex align-items-center" href="{% url 'transaction_list' %}"
              ><i data-feather="credit-card"></i
              ><span class="menu-title text-truncate" data-i18n="Transaction">Transactions</span></a
            >
          </li>
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#"
              ><i data-feather="home"></i
              ><span class="menu-title text-truncate" data-i18n="Calculators">Real Estate</span></a
            >
            <ul class="menu-content">
              <li class="nav-item">
                <a class="d-flex align-items-center" href="{% url 'real_estate_home' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-title text-truncate" data-i18n="Home Page">Home page</span></a
                >
              </li>
              <li class="nav-item">
                <a class="d-flex align-items-center" href="#"
                  ><i data-feather="circle"></i
                  ><span class="menu-title text-truncate" data-i18n="Property Manage">Property Manage</span></a
                >
                <ul class="menu-content">
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'property_list' or request.resolver_match.view_name == 'property_add' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'property_list' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Properties">Properties</span></a
                    >
                  </li>
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'property_income_list' or request.resolver_match.view_name == 'property_invoice_list' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'property_income_list' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Properties">Income</span></a
                    >
                  </li>
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'property_expense_list' or request.resolver_match.view_name == 'property_expense_add' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'property_expense_list' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Properties">Expenses</span></a
                    >
                  </li>
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'property_maintenance_list' or request.resolver_match.view_name == 'property_maintenance_add' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'property_maintenance_list' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Properties">Maintenace</span></a
                    >
                  </li>
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'property_sample_page'%}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'property_sample_page' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Sample Page">Sample Page</span></a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="d-flex align-items-center" href="#"
                  ><i data-feather="circle"></i
                  ><span class="menu-title text-truncate" data-i18n="Properties">Properties Model</span></a
                >
                <ul class="menu-content">
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'rental_property_list' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'rental_property_list' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Properties">Rental Property</span></a
                    >
                  </li>
                  <li
                    class="nav-item {% if request.resolver_match.view_name == 'rental_property_sample_page' or request.resolver_match.view_name == 'property_add' %}active{% endif %}"
                  >
                    <a class="d-flex align-items-center" href="{% url 'rental_property_sample_page' %}"
                      ><i data-feather="circle"></i
                      ><span class="menu-title text-truncate" data-i18n="Sample Page">Sample Page</span></a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#"
              ><i class="fa fa-calculator fa-1"></i
              ><span class="menu-title text-truncate" data-i18n="Calculators">Calculators</span></a
            >
            <ul class="menu-content">
              <li class="{% if request.resolver_match.view_name == 'mortgagecalculator_list' %}active{% endif %}">
                <a class="d-flex align-items-center" href="{% url 'mortgagecalculator_list' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Mortgage Calculator">Mortgage Calculator</span></a
                >
              </li>
              <li class="{% if request.resolver_match.view_name == 'future_net_worth_calculator' %}active{% endif %}">
                <a class="d-flex align-items-center" href="{% url 'future_net_worth_calculator' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="Future Net Worth Calculator"
                    >Future Net Worth Calculator</span
                  ></a
                >
              </li>
            </ul>
          </li>
          <li class="nav-item {% if request.resolver_match.view_name == 'stock_holdings' %}active{% endif %}">
            <a class="d-flex align-items-center" href="{% url 'stock_holdings' %}"
              ><i data-feather="bar-chart"></i
              ><span class="menu-title text-truncate" data-i18n="Stock Analysis">Stock Portfolios & Holdings</span></a
            >
          </li>
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#">
              <i data-feather="globe"></i>
              <span class="menu-title text-truncate" data-i18n="Calculators">Languages</span>
            </a>
            <ul class="menu-content">
              {% get_current_language as CURRENT_LANGUAGE %} {% get_available_languages as LANGUAGES %} {%
              get_language_info_list for LANGUAGES as languages %} {% for language in languages %}
              <li class="nav-item">
                <a class="d-flex align-items-center" href="#" onclick="changeLanguage('{{ language.code }}')">
                  <i data-feather="circle"></i>
                  <span class="menu-title text-truncate">{{ language.name_local }} ({{ language.code }})</span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </li>
          {% if request.user.is_staff %}
          <li class="nav-item">
            <a class="d-flex align-items-center" href="#">
              <i data-feather="settings"></i>
              <span class="menu-title text-truncate" data-i18n="Admin Panel">Admin Panel</span>
            </a>
            <ul class="menu-content">
              <li class="{% if request.resolver_match.view_name == 'app-error-report' %}active{% endif %}">
                <a class="d-flex align-items-center" href="{% url 'app-error-report' %}"
                  ><i data-feather="circle"></i
                  ><span class="menu-item text-truncate" data-i18n="App Error Report">App Error Report</span></a
                >
              </li>
            </ul>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
    <!-- END: Main Menu-->
    <div class="my-loader">
      <img src="{% static 'assets/animations/loading_small.gif' %}" alt="Loading..." />
    </div>
    {% endif %}
    <!--START: Right Sidebar Includes-->
    {% if request.user.is_authenticated %}
    {% include "./right-sidebar/sidebar_toggler.html" %}
    {% include "./right-sidebar/sidebar_body.html" %}
    {% endif %}
    {% include "./right-sidebar/image_preview_modal.html" %}
    {% include "./right-sidebar/edit_note_modal.html" %}
    {% if request.user.is_staff %}
    {% include "./admin_only/error_details_modal.html" %}
    {% endif %}
    <!--END: Right Sidebar Includes-->
    <!-- BEGIN: Content-->
    {% block content %} {% endblock content %}
    <!-- END: Content-->
    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>
    <!-- BEGIN: Footer-->
    <footer class="footer footer-static footer-light">
      <p class="clearfix mb-0">
        <span class="float-md-left d-block d-md-inline-block mt-25"
          >COPYRIGHT &copy; 2024<span class="d-none d-sm-inline-block">, All rights Reserved</span></span
        ><span class="float-md-right d-none d-md-block"></span>
      </p>
    </footer>
    <button class="btn btn-primary btn-icon scroll-top" type="button"><i data-feather="arrow-up"></i></button>
    <!-- END: Footer-->
    <!-- BEGIN: Vendor JS-->
    <script src="{% static 'app-assets/vendors/js/vendors.min.js' %}"></script>
    <!-- BEGIN Vendor JS-->
    <!-- BEGIN: Page Vendor JS-->
    <script src="{% static 'app-assets/vendors/js/charts/apexcharts.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/charts/chart.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/pickers/pickadate/picker.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/pickers/pickadate/picker.date.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/pickers/pickadate/picker.time.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/pickers/pickadate/legacy.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/pickers/flatpickr/flatpickr.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/calendar/fullcalendar.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/extensions/moment.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/forms/select/select2.full.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/forms/validation/jquery.validate.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/extensions/sweetalert2.all.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/forms/wizard/bs-stepper.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/forms/spinner/jquery.bootstrap-touchspin.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/extensions/toastr.min.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/forms/form-number-input.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/tables/datatable/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/tables/datatable/dataTables.bootstrap4.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/tables/datatable/responsive.bootstrap4.js' %}"></script>
    <script src="{% static 'app-assets/vendors/js/extensions/shepherd.min.js' %}"></script>
    <!-- END: Page Vendor JS-->
    <!-- BEGIN: Theme JS-->
    <script src="{% static '/app-assets/js/core/app-menu.js' %}"></script>
    <script src="{% static '/app-assets/js/core/app.js'%}"></script>
    <!-- END: Theme JS-->
    <!-- BEGIN: Page JS-->
    <script src="{% static '/assets/js/datatables.min.js' %}"></script>
    <script src="{% static '/assets/js/papaparse.min.js' %}"></script>
    <script src="{% static '/app-assets/js/scripts/tables/table-datatables-advanced.js' %}"></script>
    <script src="{% static '/app-assets/js/scripts/pages/app-ecommerce.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/forms/pickers/form-pickers.js' %}"></script>
    <script src="{% static 'assets/js/app-calendars-events.js' %}"></script>
    <script src="{% static 'assets/js/app-calendars.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/pages/page-auth-register.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/extensions/ext-component-sweet-alerts.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/pages/app-ecommerce-checkout.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/forms/form-wizard.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/pages/app-user-edit.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/components/components-navs.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/components/components-collapse.js' %}"></script>
    <script src="{% static 'app-assets/js/scripts/extensions/ext-component-tour.js' %}"></script>
    <!-- END: Page JS-->
    <script src="{% static 'assets/js/line-graph.js' %}"></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <script src="{% static 'assets/js/pie_graphs.js' %}"></script>
    <script src="{% static 'assets/js/diversification_tree.js' %}"></script>
    <script src="{% static 'assets/js/loader.js' %}"></script>
    <script>
      BudgetsBarChart({{ budget_graph_data | safe }}, {{ budget_names | safe }}, "{{budget_bar_id | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ budget_graph_data2 | safe }}, {{ budget_names2 | safe }}, "{{budget_bar_id2 | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ budget_income_graph_data | safe }}, {{ budget_income_names | safe }}, "{{budget_income_bar_id | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ budget_income_graph_data2 | safe }}, {{ budget_income_names2 | safe }}, "{{budget_income_bar_id2 | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ week_budget_graph_data | safe }}, {{ budget_names | safe }}, "{{week_budget_bar_id | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ quart_budget_graph_data | safe }}, {{ budget_names | safe }}, "{{quart_budget_bar_id | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ yearly_budget_graph_data | safe }}, {{ budget_names | safe }}, "{{yearly_budget_bar_id | safe}}");
    </script>
    <script>
      BudgetsBarChart({{ template_budget_graph_data | safe }}, {{ template_budget_names | safe }}, "{{template_budget_bar_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_names | safe }}, {{ budget_graph_value | safe }}, "{{ budget_graph_currency | safe }}", "{{budget_graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_names2 | safe }}, {{ budget_graph_value2 | safe }}, "{{ budget_graph_currency | safe }}", "{{budget_graph_id2 | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_income_names | safe }}, {{ budget_income_graph_value | safe }}, "{{ budget_graph_currency | safe }}", "{{budget_income_graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_income_names2 | safe }}, {{ budget_income_graph_value2 | safe }}, "{{ budget_graph_currency | safe }}", "{{budget_income_graph_id2 | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_names | safe }}, {{ week_budget_graph_value | safe }}, "{{ budget_graph_currency | safe }}", "{{week_budget_graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_names | safe }}, {{ quart_budget_graph_value | safe }}, "{{ budget_graph_currency | safe }}", "{{quart_budget_graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_names | safe }}, {{ yearly_budget_graph_value | safe }}, "{{ budget_graph_currency | safe }}", "{{yearly_budget_graph_id | safe}}");
    </script>
    <script>
      LinesGraph({{ balance_graph_data | safe }});
    </script>
    <script>
      LinesGraph({{close_graph_data | safe}});
    </script>
    <script>
      MortgageChart({{ mortgage_graph_data | safe }}, {{ mortgage_date_data | safe}});
    </script>
    <script>
      showCalenders( {{ calendar_bill_data | safe }});
    </script>
    <script>
      AccountsChart( {{ account_graph_data | safe }}, {{ date_range_list | safe }}, {{max_value}}, {{min_value}});
    </script>
    <script>
      BudgetChart({{ graph_label | safe }}, {{ graph_value | safe }}, "{{ graph_currency | safe }}", "{{graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ bill_label | safe }}, {{ bill_value | safe }}, "{{ bill_currency | safe }}", "{{bill_id | safe}}");
    </script>
    <script>
      BudgetChart({{ income_label | safe }}, {{ income_value | safe }}, "{{ income_currency | safe }}", "{{income_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_graph_label | safe }}, {{ template_budget_graph_value | safe }}, "{{ template_budget_graph_currency | safe }}", "{{template_budget_graph_id | safe}}");
    </script>
    <script>
      BudgetChart({{ budget_graph_label | safe }}, {{ cmp_budget_value | safe }}, "{{ budget_graph_currency | safe }}", "{{cmp_month_graph_id | safe}}");
    </script>
    <script>
      AllCompareBudgets( {{ week_pie_chart | safe }}, {{ monthly_pie_chart | safe }}, {{ quart_pie_chart | safe }}, {{ yearly_pie_chart | safe }}, "{{ budget_graph_currency | safe }}");
    </script>
    <script>
      TransactionGraph({{ debit_graph_data | safe }}, {{ credit_graph_data | safe }}, {{ transaction_date_data | safe }});
    </script>
    <script>
      CategorySpentChart({{ categories_name | safe }}, {{ categories_series | safe}}, "#column-chart");
    </script>
    <script>
      var translatedCategories = JSON.parse('{{ translated_data | safe }}');BudgetCashFlowChart({{ cash_flow_names | safe }}, {{ cash_flow_data | safe}}, translatedCategories, "#cash_flow_bar");
    </script>
    <script>
      barChart({{ categories_name | safe }}, {{ categories_series | safe}}, "#future-net-chart");
    </script>
    <script>
      CategorySpentChart({{ projection_key | safe }}, {{ cash_on_cash_return_data | safe}}, "#cash-bar-chart");
    </script>
    <script>
      CategorySpentChart({{ projection_key | safe }}, {{ return_on_investment_data | safe}}, "#return-bar");
    </script>
    <script>
      CategorySpentChart({{ projection_key | safe }}, {{ debt_cov_ratio_data | safe}}, "#coverage-ratio-bar");
    </script>
    <script>
      CategorySpentChart({{ projection_key | safe }}, {{ return_investment_data | safe}}, "#investment-return-bar");
    </script>
    <script>
      CategorySpentChart({{ projection_key | safe }}, {{ property_expense_data | safe}}, "#expense-bar");
    </script>
    <script>
      showIndustryGraph({{industry_lables | safe}}, {{industry_data | safe}});
    </script>
    <script>
      showStockAmount({{stocks_amount | safe}});
    </script>
    <script>
      portfolioWeights({{code_list | safe}}, {{weight1 | safe}}, {{weight2 | safe}});
    </script>
    <script>
      PortfolioValueChart( {{ candle_graph_data | safe }}, {{ candle_graph_data_id | safe }});
    </script>
    <script>
      showPortfolioRange({{close_week_1 | safe }}, "{{ week_1_id }}");
    </script>
    <script>
      showPortfolioRange({{close_month_1 | safe }}, "{{ month_1_id }}");
    </script>
    <script>
      showPortfolioRange({{close_month_3 | safe }}, "{{ month_3_id }}");
    </script>
    <script>
      showPortfolioRange({{close_month_6 | safe }}, "{{ month_6_id }}");
    </script>
    <script>
      showPortfolioRange({{close_year | safe }}, "{{ year_1_id }}");
    </script>
    <script>
      $("#property_table").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#categories").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#accounts").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#bills").DataTable({ aaSorting: [], dom: "rtip" });
    </script>
    <script>
      $("#budgets").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#transactions").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#goals").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#mortgage").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#my_port_table").DataTable({
        aaSorting: [],
        scrollY: "480px",
        scrollX: true,
        scrollCollapse: true,
        paging: true,
      });
    </script>
    <script>
      $("#portfolio_earnings").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#portfolio_value").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#portfolio_profitability").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#portfolio_income").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#portfolio_balance_sheet").DataTable({ aaSorting: [] });
    </script>
    <script>
      $("#portfolio_cash_flow_data").DataTable({ aaSorting: [] });
    </script>
    <script>
      $(window).on("load", function () {
        if (feather) {
          feather.replace({
            width: 14,
            height: 14,
          });
        }
      });
    </script>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <script type="text/javascript">
      // Get cookie for CSRF token
      //
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split(";");
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === name + "=") {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }

      const csrftoken = getCookie("csrftoken");

      const myHeaders = new Headers({
        "Content-Type": "text/plain",
        "X-CSRFToken": csrftoken,
      });

      // Create and return new link token, which will be passed to the configs object
      // through async await.
      //
      async function linkTokenFunc() {
        // Fetch the link token from Plaid
        //
        const fetchLinkToken = async () => {
          const response = await fetch("/create_link_token", {
            method: "POST",
            credentials: "same-origin",
            headers: myHeaders,
          });
          const responseJSON = await response.json();
          console.log(responseJSON.link_token);
          link_token = responseJSON.link_token;
          return link_token;
        };

        const configs = {
          // 1. Pass a new link_token to Link.
          token: await fetchLinkToken(),
          onSuccess: async function (public_token, metadata) {
            // 2a. Send the public_token to your app server.
            // The onSuccess function is called when the user has successfully
            // authenticated and selected an account to use.

            await fetch("/get_access_token", {
              method: "POST",
              headers: myHeaders,
              body: JSON.stringify({
                public_token: public_token,
                accounts: metadata.accounts,
              }),
            });
          },
          onExit: async function (err, metadata) {
            // 2b. Gracefully handle the invalid link token error. A link token
            // can become invalidated if it expires, has already been used
            // for a link session, or is associated with too many invalid logins.
            if (err != null && err.error_code === "INVALID_LINK_TOKEN") {
              linkHandler.destroy();
              linkHandler = Plaid.create({
                ...configs,
                token: await fetchLinkToken(),
              });
            }
            if (err != null) {
              // Handle any other types of errors.
            }

            window.location = "/accounts/";
            // metadata contains information about the institution that the
            // user selected and the most recent API request IDs.
            // Storing this information can be helpful for support.
          },
        };

        var linkHandler = Plaid.create(configs);
        linkHandler.open();
      }

      document.getElementById("link-button").onclick = function () {
        console.log("Inn");
        linkTokenFunc();
      };
    </script>
    <script>
      function changeLanguage(selectedLanguage) {
        var currentUrl = window.location.href;
        var baseUrl = currentUrl.split("/{{ CURRENT_LANGUAGE }}" + "/")[0];

        var newUrl =
          baseUrl +
          "/" +
          selectedLanguage +
          "/" +
          currentUrl
            .split("/{{ CURRENT_LANGUAGE }}" + "/")
            .slice(1)
            .join("/{{ CURRENT_LANGUAGE }}" + "/");

        window.location.href = newUrl;
      }
    </script>
    <script>
      const dropContainer = document.getElementById("dropcontainer");
      const fileInput = document.getElementById("images");

      dropContainer.addEventListener(
        "dragover",
        (e) => {
          // prevent default to allow drop
          e.preventDefault();
        },
        false
      );

      dropContainer.addEventListener("dragenter", () => {
        dropContainer.classList.add("drag-active");
      });

      dropContainer.addEventListener("dragleave", () => {
        dropContainer.classList.remove("drag-active");
      });

      dropContainer.addEventListener("drop", (e) => {
        e.preventDefault();
        dropContainer.classList.remove("drag-active");
        fileInput.files = e.dataTransfer.files;
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#deadlineCheckbox").change(function () {
          if ($(this).is(":checked")) {
            $("#goalDateContainer").show();
          } else {
            $("#goalDateContainer").hide();
          }
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        console.log("jQuery ready");
        $(".default-dropdown").on("change", function () {
          if ($(this).val() === "yes") {
            $(".default-dropdown").not(this).val("no");
          }
        });
      });
    </script>
    <script>
      // from https://docs.djangoproject.com/en/stable/ref/csrf/#ajax
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          document.cookie.split(";").forEach((cookie) => {
            cookie = cookie.trim();
            if (cookie.startsWith(name + "=")) {
              cookieValue = decodeURIComponent(cookie.slice(name.length + 1));
            }
          });
        }
        return cookieValue;
      }

      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".default-dropdown").forEach((select) => {
          select.addEventListener("change", async function () {
            if (this.value !== "yes") return; // only on yes
            const url = this.dataset.url; // e.g. "/en/budgets/2/ajax/change-default/"
            const csrftoken = getCookie("csrftoken");
            toastr.options = {
              positionClass: "toast-top-right",
              timeOut: "2000", // disappear after 2 seconds
              closeButton: true,
            };
            try {
              const res = await fetch(url, {
                method: "POST",
                credentials: "same-origin",
                headers: {
                  "X-CSRFToken": csrftoken,
                  "Content-Type": "application/json",
                  Accept: "application/json",
                },
                body: JSON.stringify({}), // or omit entirely
              });

              if (!res.ok) {
                console.error("Server error", res.status, await res.text());
                return;
              }

              const data = await res.json();
              if (data.status === "ok") {
                toastr.success("Default budget updated!");
                setTimeout(() => window.location.reload(), 1000);
              } else {
                console.error("Unexpected response", data);
              }
            } catch (err) {
              console.error("Fetch failed", err);
            }
          });
        });
      });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const tour = new Shepherd.Tour({
          useModalOverlay: true,
          defaultStepOptions: {
            classes: 'shadow-md bg-purple-dark',
            scrollTo: true,
            cancelIcon: {
              enabled: true
            },
            scrollTo: {
              behavior: 'smooth',
              block: 'center'
            }
          }
        });

        tour.addStep({
          id: 'welcome-step',
          title: 'Welcome!',
          text: 'Welcome to the Real Estate Results page! This is where you can review detailed results and analysis of your rental property model.\
                  <br><br>Familiarize yourself with the main navigation tabs at the top to explore different insights.',
          buttons: [
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature1-step',
          title: 'Property Overview',
          text: 'The top section displays a summary of the property, including address, down payment, and purchase price. It also features a photo of the property.\
                  <br><br>Verify that the displayed information matches your input data for accuracy.',
          attachTo: {
            element: '#property_details',
            on: 'bottom'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature2-step',
          title: 'Navigation Tabs',
          text: 'The page contains four navigation tabs: Investment Summary, Stats & Graphs, Income Statement, and Mortgage Analysis. <br><br>Click through each tab to explore different aspects of the property analysis.',
          attachTo: {
            element: '#custom-nav',
            on: 'bottom'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature3-step',
          title: 'Investment Summary Tab',
          text: 'This tab offers a summary of all property-related details, including property price, down payment, taxes, fees, and total investment required.\
                <br><br>Review all information to ensure it aligns with your input. Adjust values if needed.',
          attachTo: {
            element: '#property_summary_data',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const tabTrigger = document.getElementById('property_summary_tab');
              if (tabTrigger) {
                tabTrigger.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature4-step',
          title: 'Capital Expenditure Budget',
          text: 'This section breaks down capital expenditures by categories like appliances, renovations, and more.\
                <br><br>Review budget allocations to ensure accurate expense tracking.',
          attachTo: {
            element: '#capex_budget_data',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': async function() {
              const tabTrigger = document.getElementById('capex_budget_tab');
              if (tabTrigger) {
                tabTrigger.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature5-step',
          title: 'Stats & Graphs Tab',
          text: 'Visual graphs illustrate return on investment, cash on cash returns, and other financial metrics over time.\
                <br><br>Hover over the graphs to view detailed insights for each year.',
          attachTo: {
            element: '#stats_graph_data',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const tabTrigger = document.getElementById('stats_graph_tab');
              if (tabTrigger) {
                tabTrigger.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature6-step',
          title: 'Income Statement Tab',
          text: 'This tab presents yearly projections for revenue, expenses, and return on investment.\
                <br><br>Compare the revenue and expense data to understand projected profitability over time.',
          attachTo: {
            element: '#income_statement_data',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const tabTrigger = document.getElementById('income_statement_tab');
              if (tabTrigger) {
                tabTrigger.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature7-step',
          title: 'Mortgage Analysis Tab',
          text: 'Displays mortgage repayment details, including monthly payments, interest breakdown, and a payment timeline.\
                <br><br>Check total payments and payoff date to plan mortgage management.',
          attachTo: {
            element: '#mortgage_analysis_data',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const tabTrigger = document.getElementById('mortgage_analysis_tab');
              if (tabTrigger) {
                tabTrigger.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature8-step',
          title: 'Calculation Result Table',
          text: 'A detailed table provides month-by-month payment breakdown, including principal, interest, and balance.\
                <br><br>Scroll through the table to see how your payments are distributed over time.',
          attachTo: {
            element: '#responsive-datatable',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature9-step',
          title: 'Final Graph',
          text: 'The final graph visualizes the reduction in mortgage balance over time and the distribution of payments.\
                <br><br>Use this graph to assess your mortgage strategy and potential refinancing plans.',
          attachTo: {
            element: '#line-chart-div',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });
        
        tour.addStep({
          id: 'end-step',
          title: 'Tour Complete!',
          text: 'You\'ve now explored all the features of the Real Estate Results page. This page provides a comprehensive view of your property\'s financial performance, helping you make informed investment decisions.\
                <br><br>Take some time to review each section thoroughly to optimize your investment strategy.',
          when: {
            'before-show': function() {
              window.scrollTo({ top: 0, behavior: 'smooth' });
            }
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Finish',
              action: tour.complete
            }
          ]
        });

        document.getElementById('start-tour-btn').addEventListener('click', function() {
          tour.start();
        });
      });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const tour = new Shepherd.Tour({
          useModalOverlay: true,
          defaultStepOptions: {
            classes: 'shadow-md bg-purple-dark',
            scrollTo: true,
            cancelIcon: {
              enabled: true
            },
            scrollTo: {
              behavior: 'smooth',
              block: 'center'
            }
          }
        });

        tour.addStep({
          id: 'welcome-step',
          title: 'Welcome!',
          text: 'Welcome to the Add Rental Property page. This feature helps you enter the necessary details to evaluate the financial performance of a potential rental property.\
                  <br><br>Follow the steps in this tour to understand how to input information across the six tabs.',
          buttons: [
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature1-step',
          title: 'Property Details',
          text: 'In this section, you\'ll provide key details about the rental property. Enter the property name, upload an image, select the currency, and choose the likely, best, and worst-case scenario prices for the property. This gives you flexibility in planning for different market conditions.\
                  <br><br>Add a property name, image, and select a purchase price scenario to begin analyzing the property.',
          attachTo: {
            element: '#faq-payment-qna',
            on: 'bottom'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ]
        });

        tour.addStep({
          id: 'feature2-step',
          title: 'Down Payment and Mortgage Details',
          text: 'Input your down payment percentage and mortgage information here. You can adjust the interest rate, mortgage amortization, and start date. This section helps calculate mortgage payments based on the property price you entered.\
                <br><br>Enter the mortgage details including down payment and interest rate to simulate the mortgage scenario.',
          attachTo: {
            element: '#mortgage-qna',
            on: 'bottom'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#account-details"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            }
          }
        });

        tour.addStep({
          id: 'feature3-step',
          title: 'Renovation, Closing, and Startup Costs',
          text: 'Use this tab to calculate additional property costs, such as land transfer taxes, legal fees, title insurance, and any renovation costs required before the property can be rented. Each cost will be factored into the propertys overall financial performance.\
                <br><br>Input the expected closing costs and renovation expenses for accurate upfront cost estimation.',
          attachTo: {
            element: '#personal-info',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          scrollTo: false,
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#personal-info"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            },

            'show': function() {
              const tourModal = this.el;
              const modalRect = tourModal.getBoundingClientRect();
              const aLittleBitOfPadding = 20; // this value is in px

              if (modalRect.top < aLittleBitOfPadding) {
                const absoluteModalTop = modalRect.top + window.scrollY;
                const scrollToPosition = absoluteModalTop - aLittleBitOfPadding;
                window.scrollTo({
                  top: scrollToPosition,
                  behavior: 'smooth'
                });
              }
            }
          }
        });

        tour.addStep({
          id: 'feature4-step',
          title: 'Estimated Monthly Revenue by Unit',
          text: 'Enter the expected monthly rent for each unit in the property. You can also specify an annual percentage increase in rent, which helps you project future rental income over time. This is important for planning long-term rental profitability.\
                <br><br>Estimate rental income for each unit, and consider adding assumptions for annual rent increases.',
          attachTo: {
            element: '#address-step',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          scrollTo: false,
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#address-step"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            },

            'show': function() {
              const tourModal = this.el;
              const modalRect = tourModal.getBoundingClientRect();
              const aLittleBitOfPadding = 20; // this value is in px

              if (modalRect.top < aLittleBitOfPadding) {
                const absoluteModalTop = modalRect.top + window.scrollY;
                const scrollToPosition = absoluteModalTop - aLittleBitOfPadding;
                window.scrollTo({
                  top: scrollToPosition,
                  behavior: 'smooth'
                });
              }
            }
          }
        });

        tour.addStep({
          id: 'feature5-step',
          title: 'Monthly Expenses',
          text: 'This tab helps track recurring expenses like property taxes, insurance, and maintenance fees. Utilities and other operating costs should also be added to get a full picture of the monthly outflows associated with the rental property.\
                <br><br>Fill out your expected monthly expenses for a complete breakdown of the propertys ongoing costs.',
          attachTo: {
            element: '#social-links',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          scrollTo: false,
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#social-links"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            },

            'show': function() {
              const tourModal = this.el;
              const modalRect = tourModal.getBoundingClientRect();
              const aLittleBitOfPadding = 20; // this value is in px

              if (modalRect.top < aLittleBitOfPadding) {
                const absoluteModalTop = modalRect.top + window.scrollY;
                const scrollToPosition = absoluteModalTop - aLittleBitOfPadding;
                window.scrollTo({
                  top: scrollToPosition,
                  behavior: 'smooth'
                });
              }
            }
          }
        });

        tour.addStep({
          id: 'feature6-step',
          title: 'Capital Expenditure Budget',
          text: 'Here, you can break down capital expenditure (CapEx) for various property components such as roof, flooring, electrical systems, and appliances. This helps track major long-term repair or replacement costs over the property\'s lifespan.\
                <br><br>Estimate replacement costs for major property components to plan for long-term capital expenditures.',
          attachTo: {
            element: '#step-budget',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          scrollTo: false,
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#step-budget"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            },
            'show': function() {
              const tourModal = this.el;
              const modalRect = tourModal.getBoundingClientRect();
              const aLittleBitOfPadding = 20; // this value is in px

              if (modalRect.top < aLittleBitOfPadding) {
                const absoluteModalTop = modalRect.top + window.scrollY;
                const scrollToPosition = absoluteModalTop - aLittleBitOfPadding;
                window.scrollTo({
                  top: scrollToPosition,
                  behavior: 'smooth'
                });
              }
            }
          }
        });

        tour.addStep({
          id: 'feature7-step',
          title: 'Investor Details',
          text: 'This section allows you to add investors\' names and capital contributions. If you are collaborating with others on a property investment, this will calculate returns for each investor and ensure accurate profit distribution.\
                <br><br>Add investor details and their capital contributions to see the financial breakdown by investor.',
          attachTo: {
            element: '#step-investor',
            on: 'top'
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Next',
              action: tour.next
            }
          ],
          when: {
            'before-show': function() {
              const selector = '.step[data-target="#step-investor"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            }
          }
        });
        
        tour.addStep({
          id: 'end-step',
          title: 'Tour Complete!',
          text: 'Congratulations! You\'ve completed the input process for the rental property. You can now analyze the potential financial performance and evaluate the property\'s profitability over time. Keep this walkthrough in mind as you continue adding more properties or refining the data for your current projects.\
                <br><br>Take some time to review each section thoroughly to optimize your investment strategy.',
          when: {
            'before-show': function() {
              window.scrollTo({ top: 0, behavior: 'smooth' });
              const selector = '.step[data-target="#account-details"] .step-trigger';
              const buttonToClick = document.querySelector(selector);
              if (buttonToClick) {
                buttonToClick.click();
              }
            }
          },
          buttons: [
            {
              text: 'Back',
              action: tour.back,
              classes: 'shepherd-button-secondary'
            },
            {
              text: 'Finish',
              action: tour.complete
            }
          ]
        });

        document.getElementById('add-property-tour-btn').addEventListener('click', function() {
          tour.start();
        });
      });
    </script>
  </body>
  <!-- END: Body-->
</html>
